<html>
<header>
    <title>My online test</title>
    <style>
        h4 {
            margin: 0.5rem 0 0.25rem 0;
        }
    </style>
</header>
<body id="body">
    <h1 id="myheader">Welcome to Kamiyaa's Online Test!</h1>

    <h4>Window/Tab visibility:</h4>
    <div id="visibility">Current visibility: visible</div>

    <h4>Window Focus:</h4>
    <div>While loop hasFocus() (focus1):
        <span id="focus1">In focus</span>
    </div>
    <div>Focusin/out event (focus2):
        <span id="focus2">In focus</span>
    </div>

    <h4>Cursor Coordinates:</h4>
    <span id="cursorx"></span>
    <span id="cursory"></span>

    <form>
        <h5>Question 1 Answer:</h5>
        <input type="text"></input>

        <h5>Question 2 Answer:</h5>
        <input type="text"></input>
    </form>
    <select>
        <option>A</option>
        <option>B</option>
        <option>C</option>
    </select>
    <button>Fake Submit</button>


</body>

<script>
window.addEventListener("load", () => {
    function generateRGB() {
        const red = Math.round(Math.random() * 255);
        const green = Math.round(Math.random() * 255);
        const blue = Math.round(Math.random() * 255);

        return { red, green, blue };
    }

    function setVisibility() {
        const element = document.getElementById("visibility");
        const current_status = `Current visibility: ${document.visibilityState}`;
        element.innerHTML = current_status;

        const { red, green, blue } = generateRGB();
        element.style.color = `rgb(${red}, ${green}, ${blue})`;

        alert(current_status);
    }
    document.addEventListener("visibilitychange", setVisibility);

    function checkPageFocus() {
        const element = document.getElementById("focus1");

        if (document.hasFocus()) {
            element.innerHTML = "In focus";
        } else {
            element.innerHTML = "Not in focus";
        }

        const { red, green, blue } = generateRGB();
        element.style.color = `rgb(${red}, ${green}, ${blue})`;
    }
    setInterval(checkPageFocus, 500);

    function onFocus() {
        const element = document.getElementById("focus2");
        element.innerHTML = "In focus";

        const { red, green, blue } = generateRGB();
        element.style.color = `rgb(${red}, ${green}, ${blue})`;
    }

    function onBlur() {
        const element = document.getElementById("focus2");
        element.innerHTML = "Not in focus";

        const { red, green, blue } = generateRGB();
        element.style.color = `rgb(${red}, ${green}, ${blue})`;
    }
    document.addEventListener("focusin", onFocus);
    document.addEventListener("focusout", onBlur);

    document.body.addEventListener("mousemove", (e) => {
        const x = document.getElementById("cursorx");
        const y = document.getElementById("cursory");
        x.innerHTML = `x: ${e.clientX}`;
        y.innerHTML = `y: ${e.clientY}`;
    });
});
</script>
</html>
